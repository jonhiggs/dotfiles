#!/usr/bin/env bash
PIPPIE_DIR=${WORKON_HOME}/pippie
source ~/.bash_profile

if [[ ! -f "./setup.py" ]]; then
  echo "This directory cannot be pippie'd"
  echo "Try changing to a directory with a setup.py file"
  exit 1
fi

[[ -d ${PIPPIE_DIR} ]] && rmvirtualenv pippie || exit 1

if [[ ! -z $1 ]]; then
  if [[ ! -f $1 ]]; then
    echo "First argument should be a path to the Python bin to use."
    exit 1
  fi
  python=$1
else
  python=$(which python)
fi

mkvirtualenv --python=$python pippie
workon pippie
pip install -e .
